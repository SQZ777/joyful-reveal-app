<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©šå–œæ­æ›‰ ğŸ‘¶ğŸ’–</title>
    <link rel="stylesheet" href="src/styles.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ‘¶</text></svg>">
</head>

<body class="reveal-page">
    <!-- å½©å¸¶å‹•ç•«å®¹å™¨ -->
    <canvas id="confetti-canvas" class="confetti-canvas"></canvas>

    <div class="container">
        <div class="reveal-card">
            <h1 class="reveal-title">Supriceï¼æˆ‘å€‘è¦ç•¶çˆ¸åª½äº† ğŸ‘¶ğŸ’–</h1>

            <div class="carousel-container">
                <div id="mediaCarousel" class="carousel">
                    <div class="slide">
                        <video id="ultrasoundVideo" class="ultrasound-video" controls autoplay preload="auto"
                            playsinline muted loop poster="public/images/ultrasound-poster.png"
                            onclick="toggleVideoZoom()">
                            <source src="public/videos/ultrasound-video1.mp4" type="video/mp4">
                            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾ã€‚è«‹<a href="public/videos/ultrasound-video1.mp4" download>ä¸‹è¼‰å½±ç‰‡</a>ä»¥æª¢è¦–ã€‚
                        </video>
                        <div class="image-hint">é»æ“Šå½±ç‰‡å¯æ”¾å¤§æŸ¥çœ‹</div>
                    </div>

                    <div class="slide">
                        <img src="public/images/ultrasound2.jpg" alt="è¶…éŸ³æ³¢ç…§ç‰‡" class="carousel-image"
                            onclick="openImageModal(this.src)" />
                        <div class="image-hint">é»æ“Šåœ–ç‰‡æ”¾å¤§æˆ–å¾€å³æ»‘æŸ¥çœ‹</div>
                    </div>
                </div>

                <button class="carousel-btn prev" aria-label="ä¸Šä¸€å¼µ" onclick="scrollCarousel(-1)">â€¹</button>
                <button class="carousel-btn next" aria-label="ä¸‹ä¸€å¼µ" onclick="scrollCarousel(1)">â€º</button>
            </div>

            <style>
                /* ç°¡å–®çš„è¼ªæ’­æ¨£å¼ï¼Œè‹¥æœ‰å…¨åŸŸ styles.css å¯ç§»é™¤é‡è¤‡é … */
                .carousel-container {
                    position: relative;
                    overflow: hidden;
                    margin: 1rem 0;
                }

                .carousel {
                    display: flex;
                    gap: 1rem;
                    overflow-x: auto;
                    scroll-snap-type: x mandatory;
                    -webkit-overflow-scrolling: touch;
                    padding-bottom: 8px;
                }

                .slide {
                    flex: 0 0 100%;
                    scroll-snap-align: start;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }

                .ultrasound-video,
                .carousel-image {
                    max-width: 100%;
                    height: auto;
                    border-radius: 12px;
                    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
                }

                .carousel-btn {
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                    background: rgba(255, 255, 255, 0.8);
                    border: none;
                    font-size: 1.6rem;
                    padding: 0.25rem 0.6rem;
                    border-radius: 8px;
                    cursor: pointer;
                }

                .carousel-btn.prev {
                    left: 8px;
                }

                .carousel-btn.next {
                    right: 8px;
                }

                .image-hint {
                    font-size: 0.9rem;
                    color: #666;
                    margin-top: 0.5rem;
                }

                /* éš±è—æ»¾å‹•æ¢ï¼ˆè¦–ç€è¦½å™¨è€Œå®šï¼‰ */
                .carousel::-webkit-scrollbar {
                    display: none;
                }
            </style>

            <script>
                (function () {
                    const carousel = document.getElementById('mediaCarousel');
                    let isDown = false, startX, scrollLeft;

                    // æ»‘é¼ æ‹–æ›³èˆ‡è§¸æ§æ”¯æ´
                    carousel.addEventListener('mousedown', (e) => {
                        isDown = true;
                        carousel.classList.add('active');
                        startX = e.pageX - carousel.offsetLeft;
                        scrollLeft = carousel.scrollLeft;
                    });
                    carousel.addEventListener('mouseleave', () => { isDown = false; carousel.classList.remove('active'); });
                    carousel.addEventListener('mouseup', () => { isDown = false; carousel.classList.remove('active'); });
                    carousel.addEventListener('mousemove', (e) => {
                        if (!isDown) return;
                        e.preventDefault();
                        const x = e.pageX - carousel.offsetLeft;
                        const walk = (x - startX) * 1; // æ»¾å‹•éˆæ•åº¦
                        carousel.scrollLeft = scrollLeft - walk;
                    });

                    // è§¸æ§æ‰‹å‹¢
                    let touchStartX = 0, touchStartScroll = 0;
                    carousel.addEventListener('touchstart', (e) => {
                        touchStartX = e.touches[0].pageX;
                        touchStartScroll = carousel.scrollLeft;
                    }, { passive: true });
                    carousel.addEventListener('touchmove', (e) => {
                        const dx = e.touches[0].pageX - touchStartX;
                        carousel.scrollLeft = touchStartScroll - dx;
                    }, { passive: true });

                    // æŒ‰éˆ•æ²å‹•ï¼šä»¥ä¸€å€‹ slide å¯¬åº¦ç‚ºå–®ä½
                    window.scrollCarousel = function (direction) {
                        const slideWidth = carousel.clientWidth;
                        const target = carousel.scrollLeft + direction * slideWidth;
                        carousel.scrollTo({ left: target, behavior: 'smooth' });
                    };

                    // é»æ“Šåœ–ç‰‡æ”¾å¤§ï¼ˆä½¿ç”¨é é¢å·²æœ‰çš„ modalï¼‰
                    window.openImageModal = function (src) {
                        const modal = document.getElementById('imageModal');
                        const modalImg = document.getElementById('modalImage');
                        if (modal && modalImg) {
                            modalImg.src = src;
                            modal.style.display = 'block';
                        }
                    };
                })();
            </script>

            <div class="message-container">
                <p class="sub-message">è¬è¬ä½ å€‘çš„ç¥ç¦èˆ‡é™ªä¼´ã€‚</p>
                <p class="date-message">å¯†ç¢¼å°±æ˜¯ 2026 å¹´é ç”¢æ—¥ï¼ğŸ¥³</p>
            </div>

            <div class="action-buttons">
                <button onclick="toggleConfetti()" class="confetti-btn">
                    ğŸ‰ æ…¶ç¥ä¸€ä¸‹
                </button>
                <button onclick="goBack()" class="back-btn">
                    ğŸ”™ è¿”å›
                </button>
            </div>
        </div>
    </div>

    <!-- åœ–ç‰‡æ”¾å¤§æ¨¡æ…‹æ¡† -->
    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
        <div class="modal-content">
            <img id="modalImage" src="" alt="æ”¾å¤§çš„è¶…éŸ³æ³¢ç…§ç‰‡">
            <button class="close-btn" onclick="closeImageModal()">&times;</button>
        </div>
    </div>

    <script src="src/main.js"></script>
    <script src="src/confetti.js"></script>
    <script>
        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥è§£é–ç‹€æ…‹
        window.addEventListener('DOMContentLoaded', function () {
            checkUnlockStatus();

            // è‡ªå‹•æ’­æ”¾å½©å¸¶å‹•ç•«
            setTimeout(() => {
                if (typeof startConfetti === 'function') {
                    startConfetti();
                }
            }, 500);
        });
    </script>
</body>

</html>